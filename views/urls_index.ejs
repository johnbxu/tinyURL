<!DOCTYPE html>
<html lang="en">
<head>
  <title>TinyApp</title>
  <link rel='stylesheet' type='text/css' href="/public/assets/styles.css">
</head>

<body>
  <!-- Add your EJS code here -->
  <header>
    <% include ../partials/_header %>
    <link rel='stylesheet' type='text/css' href='style.css'>
  </header>

  <h1>
    List of URLs in database
  </h1>
  <table>
      <% if (!loggedIn) { %>
        <tr><th style="text-align: center;">Please Login First</th></tr>
      <% } else { %>
        <% for (const url in urls) { %>
          <tr>
            <th>
              <form action='/urls/<%= url %>/delete?_method=DELETE' method="POST" id='form<%= url %>'>
                <a href='/u/<%= url %>'><%= url %>: <%= urls[url].longURL %>
              </form>
            </th>
            <th>
              <button type='submit' formmethod='POST' form='form<%= url %>'>Delete</button>
            </th>
            <th>
              <form method="GET" action='/urls/<%= url %>'>
                <button type='submit' formmethod='GET'>Update</button>
              </form>
            </th>
            <% if (urls[url].uniqueVisits) { %>
              <th>Unique Visits: <%= urls[url].uniqueVisits %></th>
            <% } %>
            <% if (urls[url].visits) { %>
              <th>Visits: <%= urls[url].visits %></th>
            <% } %>
          </tr>
        <% } %>
      <% } %>
  </table>
</body>
</html>